---
import PostDetailPage from '../../../components/pages/PostDetail.astro'
import { getLangFromUrl } from '../../../i18n/utils'
import { getAvailableLangsForPost, getPostPaths, getPostSlug } from '../../../utils/content'

export async function getStaticPaths() {
  return getPostPaths('zh')
}

const { post } = Astro.props
const slug = getPostSlug(post.id)
const availableLangs = await getAvailableLangsForPost(slug)
const lang = getLangFromUrl(Astro.url)
---

<PostDetailPage post={post} availableLangs={availableLangs} lang={lang} />
